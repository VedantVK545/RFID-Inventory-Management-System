<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>{{pageTitle}} - RFID Inventory System</title>
    <link rel="stylesheet" href="/css/styles.css?v=1.3" />
    <link rel="stylesheet" href="/css/blob-theme.css?v=1.1" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons+Round"
    />

    <!-- Critical styles for proper display -->
    <style>
      html,
      body {
        margin: 0 !important;
        padding: 0 !important;
        width: 100% !important;
        height: 100% !important;
        overflow-x: hidden !important;
        background: #0f172a !important;
      }

      /* Fallback animation keyframes */
      @keyframes float {
        0%,
        100% {
          transform: translate(0, 0) scale(1);
        }
        25% {
          transform: translate(50px, -50px) scale(1.1);
        }
        50% {
          transform: translate(-20px, 40px) scale(0.9);
        }
        75% {
          transform: translate(-40px, -30px) scale(1.05);
        }
      }
    </style>

    <!-- Additional page-specific styles -->
    {{#if customStyles}} {{{customStyles}}} {{/if}}
  </head>
  <body>
    <!-- Direct blob HTML as fallback -->
    <div
      class="blob-container"
      style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        overflow: hidden;
        pointer-events: none;
      "
    >
      <div
        class="blob"
        style="
          position: absolute;
          width: 600px;
          height: 600px;
          filter: blur(100px);
          opacity: 0.5;
          animation: float 10s ease-in-out infinite;
          background: radial-gradient(
            circle at center,
            #4f46e5 0%,
            transparent 70%
          );
          top: -200px;
          left: -200px;
          animation-delay: -2s;
          pointer-events: none;
        "
      ></div>
      <div
        class="blob"
        style="
          position: absolute;
          width: 600px;
          height: 600px;
          filter: blur(100px);
          opacity: 0.5;
          animation: float 10s ease-in-out infinite;
          background: radial-gradient(
            circle at center,
            #0ea5e9 0%,
            transparent 70%
          );
          bottom: -200px;
          right: -200px;
          animation-delay: -3s;
          pointer-events: none;
        "
      ></div>
      <div
        class="blob"
        style="
          position: absolute;
          width: 600px;
          height: 600px;
          filter: blur(100px);
          opacity: 0.5;
          animation: float 10s ease-in-out infinite;
          background: radial-gradient(
            circle at center,
            #2563eb 0%,
            transparent 70%
          );
          bottom: 300px;
          left: 50%;
          animation-delay: -4s;
          pointer-events: none;
        "
      ></div>
    </div>

    <div class="dashboard">
      <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <h3>RFID Inventory</h3>
          <p id="username">Loading...</p>
        </div>

        <div class="sidebar-menu">
          <a href="/" class="menu-item {{#if isHome}}active{{/if}}">
            <span class="material-icons-round">dashboard</span> Dashboard
          </a>

          <a
            href="/inventory"
            class="menu-item {{#if isInventory}}active{{/if}}"
          >
            <span class="material-icons-round">inventory_2</span> Inventory
          </a>

          <a href="/rfid" class="menu-item {{#if isRfid}}active{{/if}}">
            <span class="material-icons-round">rss_feed</span> RFID Devices
          </a>

          <a
            href="/receiptlogs"
            class="menu-item {{#if isReceipts}}active{{/if}}"
          >
            <span class="material-icons-round">receipt_long</span> Transactions
          </a>

          <a href="/usercores" class="menu-item {{#if isUsers}}active{{/if}}">
            <span class="material-icons-round">group</span> Users
          </a>

          <a href="/userlogs" class="menu-item {{#if isLogs}}active{{/if}}">
            <span class="material-icons-round">visibility</span> Activity Logs
          </a>

          <a href="/logout" class="menu-item">
            <span class="material-icons-round">logout</span> Logout
          </a>
        </div>
      </div>

      <div class="main-content">{{{body}}}</div>
    </div>

    <!-- Core scripts -->
    <script src="/js/userinfo.js"></script>
    <script src="/js/blob-animation.js"></script>
    <script src="/ensure-blobs.js"></script>

    <!-- Page-specific scripts -->
    {{#if customScripts}} {{{customScripts}}} {{/if}}
  </body>
</html>
